{% extends "base.html" %}

{% block content %}
<h2>근태 기록</h2>

<!-- 엑셀 다운로드 버튼 (테이블 위에 위치) -->
<a href="{{ url_for('attendance.download_attendance') }}">
  <button>📥 엑셀 다운로드</button>
</a>

<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>날짜</th>
      <th>출근 시간</th>
      <th>출근 메모</th>
      <th>출근 IP</th>
      <th>퇴근 시간</th>
      <th>퇴근 메모</th>
      <th>퇴근 IP</th>
      <th>삭제</th>
    </tr>
  </thead>
  <tbody>
    {% for record in records %}
    <tr>
      <td>{{ record.work_date }}</td>
      <td>{{ record.clock_in or "-" }}</td>
      <td>{{ record.memo_in or "" }}</td>
      <td>{{ record.ip_address_in or "-" }}</td>
      <td>{{ record.clock_out or "-" }}</td>
      <td>{{ record.memo_out or "" }}</td>
      <td>{{ record.ip_address_out or "-" }}</td>
      <td>
        <form method="POST" action="{{ url_for('attendance.delete_attendance', attendance_id=record['id']) }}">
          <button type="submit" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
